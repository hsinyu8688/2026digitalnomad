import React, { useState } from 'react';
import { 
  Plane, 
  MapPin, 
  Coffee, 
  Utensils, 
  Moon, 
  Sun, 
  Laptop, 
  Dumbbell, 
  Music, 
  Camera, 
  Calendar, 
  Info,
  ChevronRight,
  ArrowRight,
  CheckSquare,
  AlertTriangle,
  FileText
} from 'lucide-react';

// --- Data: å®Œæ•´çš„è¡Œç¨‹è³‡æ–™åº« ---
const scheduleData = [
  {
    id: 'day1',
    date: '2/19',
    day: 'é€±å››',
    location: 'æ±äº¬',
    theme: 'entry',
    hotel: 'ä¸‰ä¸Šæ·ºè‰æ©‹é£¯åº—',
    events: [
      { time: '09:00', endTime: '12:50', title: 'CI 0220 é£›å¾€æ±äº¬', type: 'flight', location: 'æ¾å±± (TSA) â†’ ç¾½ç”° (HND)', notes: 'æŠµé”å¾Œå‰å¾€é£¯åº— Check-in' },
      { 
        time: '15:00', 
        title: 'Glitch Coffee (æ—¥æœ¬æ©‹åº—)', 
        type: 'food', 
        location: 'æ—¥æœ¬æ©‹æœ¬ç”º 1-1-3 ç«‹çŸ³æœ¬ç”ºãƒ“ãƒ« 1F', 
        mapUrl: 'https://maps.app.goo.gl/phFex9VWXVAtVJsm7',
        notes: 'å¿…å–æ·ºç„™æ‰‹æ²–ï¼Œé›¢æ™šé¤åœ°é»å¾ˆè¿‘' 
      },
      { 
        time: '17:30', 
        title: 'äº”ä»£ç›® èŠ±å±±çƒé¾éºµ', 
        type: 'food', 
        location: 'æ—¥æœ¬æ©‹åº—', 
        mapUrl: 'https://maps.app.goo.gl/sMkzjHsJ3V2ecYH88',
        notes: 'å»ºè­° 17:00 å‰å¾€æ’éšŠï¼Œå¿…é»ã€Œé¬¼ç´å·å¯¬éºµã€' 
      },
      { 
        time: '20:00', 
        title: 'é£¯åº—ä¼‘æ¯', 
        type: 'hotel', 
        location: 'ä¸‰ä¸Šæ·ºè‰æ©‹é£¯åº—', 
        mapUrl: 'https://maps.app.goo.gl/Rs6CwSPm4CVYrcmZA',
        notes: 'æ·ºè‰æ©‹ç«™é™„è¿‘' 
      },
    ]
  },
  {
    id: 'day2',
    date: '2/20',
    day: 'é€±äº”',
    location: 'æ±äº¬',
    theme: 'foodie',
    hotel: 'ä¸‰ä¸Šæ·ºè‰æ©‹é£¯åº—',
    events: [
      { time: '07:30', title: 'å‰å¾€ PATH æ’éšŠ', type: 'move', location: 'ä»£ä»£æœ¨å…¬åœ’/å¯Œè°·', notes: 'æ’éšŠååº—ï¼Œå‹™å¿…ææ—©' },
      { 
        time: '08:00', 
        title: 'PATH æ—©é¤', 
        type: 'food', 
        location: 'PATH', 
        mapUrl: 'https://maps.app.goo.gl/yoXuMWKVWCMVh7529',
        notes: 'å¿…é»ï¼šè·è˜­é¬†é¤… (Dutch Pancake)' 
      },
      { time: '10:30', title: 'ä¸­ç›®é»‘æ•£ç­–', type: 'activity', location: 'ä¸­ç›®é»‘', notes: 'ç›®é»‘å·ã€æ˜Ÿå·´å…‹è‡»é¸çƒ˜ç„™å·¥åŠ' },
      { time: '12:00', title: 'éº»å¸ƒå° ç²‹ ç¨»è‘‰', type: 'food', location: 'éº»å¸ƒå°ä¹‹ä¸˜ Tower Plaza 3F', notes: 'ã€å·²é ç´„ã€‘åˆé–“å£½å¸æ‡·çŸ³' },
      { time: '14:30', title: 'éº»å¸ƒå°ä¹‹ä¸˜ & teamLab', type: 'activity', location: 'éº»å¸ƒå°ä¹‹ä¸˜', notes: 'teamLab Borderless (éœ€é ç´„)ã€çœ‹æ±äº¬éµå¡”' },
    ]
  },
  {
    id: 'day3',
    date: '2/21',
    day: 'é€±å…­',
    location: 'æ±äº¬',
    theme: 'leisure',
    hotel: 'ä¸‰ä¸Šæ·ºè‰æ©‹é£¯åº—',
    events: [
      { time: 'ä¸Šåˆ', title: 'æ·ºè‰æ•£ç­–', type: 'activity', location: 'é›·é–€ / ä»²è¦‹ä¸–é€š', notes: 'é£¯åº—é™„è¿‘ï¼Œè¼•é¬†é€›é€›' },
      { 
        time: '12:00', 
        title: 'æ·ºè‰ä»ŠåŠ (åœ‹éš›é€šæœ¬åº—)', 
        type: 'food', 
        location: 'å°æ±å€è¥¿æ·ºè‰ 3-1-12', 
        mapUrl: 'https://www.google.com/maps/search/?api=1&query=Asakusa+Imahan+Kokusai+Dori+Honten',
        notes: 'ç™¾å¹´å£½å–œç‡’è€åº—ï¼Œåˆé–“å¥—é¤CPå€¼é«˜ (å»ºè­°é ç´„)' 
      },
      { time: 'ä¸‹åˆ', title: 'æœ€å¾Œæ¡è³¼ / è‡ªç”±æ´»å‹•', type: 'activity', location: 'éŠ€åº§ / æ¾€è°·', notes: 'æŠŠæ¡æœ€å¾Œé€›è¡—æ™‚é–“' },
      { time: 'æ™šä¸Š', title: 'æ‰“åŒ…è¡Œæ', type: 'note', location: 'é£¯åº—', notes: 'âš ï¸ æ˜å¤©å»æˆç”°æ©Ÿå ´ (NRT)ï¼ŒæŸ¥å¥½äº¤é€šï¼' },
    ]
  },
  {
    id: 'day4',
    date: '2/22',
    day: 'é€±æ—¥',
    location: 'ç§»å‹•',
    theme: 'transit',
    hotel: 'Roomates Hostel Canggu',
    events: [
      { time: '07:30', title: 'å‰å¾€æˆç”°æ©Ÿå ´', type: 'move', location: 'å¾€ NRT', notes: 'æ­ä¹˜ Skyliner æˆ– N\'EX' },
      { time: '10:25', title: 'OD873 é£›å¾€å‰éš†å¡', type: 'flight', location: 'æˆç”° (NRT) â†’ å‰éš†å¡ (KUL)', notes: 'Batik Air' },
      { time: '16:55', title: 'å‰éš†å¡è½‰æ©Ÿ', type: 'transit', location: 'KUL', notes: 'âš ï¸ è½‰æ©Ÿåƒ… 1 å°æ™‚ï¼Œè«‹è¡åˆºï¼' },
      { time: '17:55', title: 'OD157 é£›å¾€å³‡é‡Œå³¶', type: 'flight', location: 'KUL â†’ DPS', notes: 'æŠµé”å³‡é‡Œå³¶ 21:05' },
      { time: '22:00', title: 'å‰å¾€ Canggu', type: 'move', location: 'Canggu', notes: 'å»ºè­°é ç´„æ©Ÿå ´æ¥é€' },
    ]
  },
  {
    id: 'day5',
    date: '2/23',
    day: 'é€±ä¸€',
    location: 'å³‡é‡Œå³¶',
    theme: 'explore',
    hotel: 'Roomates Hostel Canggu',
    events: [
      { time: 'ä¸Šåˆ', title: 'é©æ‡‰æ”¾é¬†', type: 'activity', location: 'Canggu', notes: 'æ—©åˆé¤ã€æŒ‰æ‘©ã€æ¢åº—' },
      { time: 'ä¸‹åˆ', title: 'è‡ªç”±æ´»å‹• (é¸é …)', type: 'activity', location: 'Canggu Area', notes: 'é¸é …ï¼š1. Wanderlust/BYND å¥èº« 2. Just Dance (Afro) 3. Udara Yoga' },
      { time: 'æ™šä¸Š', title: 'Canggu å¤œç”Ÿæ´»', type: 'food', location: 'The Lawn / Old Man\'s', notes: 'äº«å—æµ·é‚Šæ°›åœ' },
    ]
  },
  {
    id: 'day6',
    date: '2/24',
    day: 'é€±äºŒ',
    location: 'å³‡é‡Œå³¶',
    theme: 'work',
    hotel: 'Roomates Hostel Canggu',
    events: [
      { time: '06:15', title: 'Rise Run Bali æ™¨è·‘', type: 'run', location: 'The Goat Father', notes: '4km/8km è¼•é¬†è·‘ï¼Œè·‘å®Œå–å’–å•¡' },
      { time: '09:00', title: 'Work Mode On', type: 'work', location: 'Co-working Space', notes: 'å°ˆæ³¨å·¥ä½œæ—¥' },
      { time: '18:00', title: 'æ™šé¤ & ç¤¾äº¤', type: 'food', location: 'Canggu', notes: 'è‹¥æœ‰åŠ›æ°£å¯å» Just Dance' },
    ]
  },
  {
    id: 'day7',
    date: '2/25',
    day: 'é€±ä¸‰',
    location: 'å³‡é‡Œå³¶',
    theme: 'work',
    hotel: 'The Cruise Berawa',
    events: [
      { time: 'ä¸Šåˆ', title: 'Work', type: 'work', location: 'Canggu', notes: 'ä¸ŠåŠå ´å·¥ä½œ' },
      { time: '12:00', title: 'æ›é£¯åº—', type: 'hotel', location: 'Canggu â†’ Berawa', notes: 'ç§»å‹•åˆ°è²æ‹‰ç“¦éƒµè¼ªå…¬å¯“' },
      { time: 'ä¸‹åˆ', title: 'Work @ New Hotel', type: 'work', location: 'The Cruise Berawa', notes: 'å…¬å¯“ç’°å¢ƒå¥½ï¼Œé©åˆè¦–è¨Šæœƒè­°' },
      { time: 'å‚™è¨»', title: 'Bambu Fitness?', type: 'gym', location: 'Uluwatu (é )', notes: 'è‹¥æƒ³å»é€™é–“ç¶²ç´…å¥èº«æˆ¿ï¼Œå¯è¶ä»Šå¤©åŒ…è»Šå»' },
    ]
  },
  {
    id: 'day8',
    date: '2/26',
    day: 'é€±å››',
    location: 'å³‡é‡Œå³¶',
    theme: 'work',
    hotel: 'The Cruise Berawa',
    events: [
      { time: 'å…¨å¤©', title: 'æœ€å¾Œè¡åˆº', type: 'work', location: 'Berawa', notes: 'å·¥ä½œæ”¶å°¾' },
      { time: '17:00', title: 'Finns Beach Club', type: 'activity', location: 'Berawa Beach', notes: 'çœ‹å¤•é™½æ…¶ç¥ Digital Nomad çµæŸ' },
    ]
  },
  {
    id: 'day9',
    date: '2/27',
    day: 'é€±äº”',
    location: 'è¿”å°',
    theme: 'transit',
    hotel: 'Sweet Home',
    events: [
      { time: '11:00', title: 'æ—©åˆé¤ & é€€æˆ¿', type: 'food', location: 'Berawa', notes: 'æœ€å¾Œå·¡ç¦®' },
      { time: '12:30', title: 'å‰å¾€æ©Ÿå ´', type: 'move', location: 'å‰å¾€ DPS æ©Ÿå ´', notes: 'é ç•™å¡è»Šæ™‚é–“' },
      { time: '15:45', title: 'CI 0772 é£›å¾€å°åŒ—', type: 'flight', location: 'DPS â†’ TPE', notes: 'æŠµé”æ¡ƒåœ’ 21:05' },
    ]
  },
];

const bucketList = [
  { 
    category: 'Gym', 
    title: 'Wanderlust Fitness Village', 
    location: 'Padonan', 
    desc: 'å…¨å³¶æœ€å¤§ CrossFit è–åœ°ï¼Œæ°£æ°›ç†±è¡€',
    bestDay: 'é€±ä¸€ (2/23)'
  },
  { 
    category: 'Gym', 
    title: 'BYND Fitness Club', 
    location: 'Canggu', 
    desc: 'æœ€ç¾ç¨»ç”°æ™¯è§€ï¼Œé©åˆæ‹ç…§ã€ç²¾ç·»å¥èº«',
    bestDay: 'é€±ä¸€æˆ–å·¥ä½œç©ºæª”'
  },
  { 
    category: 'Dance', 
    title: 'Just Dance Bali', 
    location: 'Berawa', 
    desc: 'Afro Classes (éæ´²èˆ) è¶…æ¨',
    bestDay: 'é€±ä¸€ & é€±äºŒ'
  },
  { 
    category: 'Yoga', 
    title: 'Udara Bali', 
    location: 'Seseh (æµ·é‚Š)', 
    desc: 'ç©ºä¸­ç‘œçˆã€æ¡‘æ‹¿ã€å†°æ°´æ± ',
    bestDay: 'é€±ä¸€ (åŠæ—¥éŠ)'
  },
  { 
    category: 'Yoga', 
    title: 'The Practice', 
    location: 'Canggu', 
    desc: 'å‚³çµ±å“ˆé”ç‘œçˆï¼Œç«¹å±‹æ•™å®¤',
    bestDay: 'å·¥ä½œæ—¥å‚æ™š'
  },
];

// --- Docs Checklist Data ---
const checklistData = [
  {
    category: 'è¡Œå‰æº–å‚™',
    items: [
      { text: 'å°å°¼é›»å­ç°½è­‰ (e-VOA)', note: 'å‡ºç™¼å‰ä¸Šç¶²ç”³è«‹ï¼Œçœå»æ’éšŠæ™‚é–“', checked: false },
      { text: 'æ—¥æœ¬ & å°å°¼ç¶²å¡', note: 'å»ºè­°æº–å‚™æ¼«éŠæˆ–å…©å¼µ SIM å¡', checked: false },
      { text: 'è½‰æ¥é ­ (å³‡é‡Œå³¶)', note: 'é›™å­”åœ“æ’ (Type C/F)', checked: false },
      { text: 'é˜²èšŠæ¶²', note: 'ç†±å¸¶åœ°å€å¿…å‚™', checked: false },
    ]
  },
  {
    category: 'é‡è¦äº¤é€šæé†’',
    items: [
      { text: 'âš ï¸ 2/22 æ©Ÿå ´ï¼šæˆç”° (NRT)', note: 'åƒè¬åˆ¥è·‘å»ç¾½ç”°ï¼', checked: false },
      { text: 'âš ï¸ 2/22 å‰éš†å¡è½‰æ©Ÿ', note: 'åªæœ‰ 1 å°æ™‚ï¼Œä¸‹æ©Ÿè«‹è¡åˆº', checked: false },
      { text: '2/22 å³‡é‡Œå³¶æ¥æ©Ÿ', note: 'æŠµé”å·²æ™š (21:05)ï¼Œå‹™å¿…é ç´„æ¥é€', checked: false },
    ]
  },
  {
    category: 'é ç´„ç¢ºèª',
    items: [
      { text: 'éº»å¸ƒå° ç²‹ ç¨»è‘‰', note: '2/20 (äº”) åˆé¤', checked: false },
      { text: 'teamLab Borderless', note: '2/20 (äº”) ä¸‹åˆ (éœ€è³¼ç¥¨)', checked: false },
      { text: 'æ·ºè‰ä»ŠåŠ', note: '2/21 (å…­) åˆé¤ (å»ºè­°é ç´„)', checked: false },
    ]
  }
];

// --- Components ---

const EventIcon = ({ type }) => {
  switch (type) {
    case 'flight': return <Plane className="text-blue-500" size={20} />;
    case 'food': return <Utensils className="text-orange-500" size={20} />;
    case 'work': return <Laptop className="text-indigo-500" size={20} />;
    case 'activity': return <Camera className="text-green-500" size={20} />;
    case 'run': return <Sun className="text-yellow-500" size={20} />;
    case 'gym': return <Dumbbell className="text-red-500" size={20} />;
    case 'hotel': return <Moon className="text-purple-500" size={20} />;
    case 'move': return <MapPin className="text-gray-500" size={20} />;
    case 'transit': return <ArrowRight className="text-gray-400" size={20} />;
    case 'note': return <AlertTriangle className="text-red-500" size={20} />;
    default: return <Info className="text-gray-400" size={20} />;
  }
};

const openMap = (location, customMapUrl) => {
  if (customMapUrl) {
    window.open(customMapUrl, '_blank');
    return;
  }
  const query = encodeURIComponent(location);
  window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
};

export default function App() {
  const [activeTab, setActiveTab] = useState('itinerary'); // itinerary | bucket | map | docs
  const [selectedDayId, setSelectedDayId] = useState('day1');

  const currentDay = scheduleData.find(d => d.id === selectedDayId);

  // æ•´ç†æ‰€æœ‰åœ°åœ–é»ä½
  const allLocations = [
    ...scheduleData.flatMap(d => d.events.filter(e => e.type !== 'note').map(e => ({
      title: e.title,
      location: e.location,
      mapUrl: e.mapUrl,
      day: d.date,
      type: e.type
    }))),
    ...bucketList.map(b => ({
      title: b.title,
      location: b.location,
      mapUrl: null,
      day: 'Bucket',
      type: b.category === 'Gym' ? 'gym' : 'activity'
    }))
  ];

  return (
    <div className="flex flex-col h-screen bg-gray-50 font-sans max-w-md mx-auto shadow-2xl overflow-hidden border-x border-gray-200">
      
      {/* Header */}
      <header className="bg-white px-6 pt-12 pb-4 shadow-sm z-10">
        <div className="flex justify-between items-center mb-2">
          <div>
            <h1 className="text-2xl font-bold text-gray-900">2026 Nomad Trip</h1>
            <p className="text-sm text-gray-500">æ±äº¬ ğŸ‡¯ğŸ‡µ â” å³‡é‡Œå³¶ ğŸ‡®ğŸ‡©</p>
          </div>
          <div className="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full">
            9 Days
          </div>
        </div>
        
        {/* Main Tabs (Top) - Only show itinerary & bucket here to save space or keep logic simple */}
        <div className="flex space-x-4 mt-4 border-b border-gray-100">
          <button 
            onClick={() => setActiveTab('itinerary')}
            className={`pb-2 text-sm font-medium ${activeTab === 'itinerary' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-400'}`}
          >
            æ¯æ—¥è¡Œç¨‹
          </button>
          <button 
            onClick={() => setActiveTab('bucket')}
            className={`pb-2 text-sm font-medium ${activeTab === 'bucket' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-400'}`}
          >
            å£è¢‹åå–®
          </button>
        </div>
      </header>

      {/* Content Area */}
      <div className="flex-1 overflow-hidden flex flex-col">
        
        {activeTab === 'itinerary' && (
          <>
            {/* Date Selector */}
            <div className="bg-white pb-2 overflow-x-auto scrollbar-hide">
              <div className="flex px-4 space-x-3 w-max">
                {scheduleData.map((day) => (
                  <button
                    key={day.id}
                    onClick={() => setSelectedDayId(day.id)}
                    className={`flex flex-col items-center justify-center min-w-[60px] h-[70px] rounded-xl transition-all ${
                      selectedDayId === day.id 
                        ? 'bg-blue-600 text-white shadow-lg scale-105' 
                        : 'bg-gray-50 text-gray-600 hover:bg-gray-100'
                    }`}
                  >
                    <span className="text-xs font-medium">{day.day}</span>
                    <span className="text-lg font-bold">{day.date}</span>
                  </button>
                ))}
              </div>
            </div>

            {/* Timeline */}
            <div className="flex-1 overflow-y-auto px-4 py-6 space-y-4 bg-gray-50">
              <div className="flex items-center space-x-2 mb-6">
                <div className="h-8 w-1 bg-blue-500 rounded-full"></div>
                <div>
                  <h2 className="text-lg font-bold text-gray-800">{currentDay.location}</h2>
                  <p className="text-sm text-gray-500 flex items-center">
                    <Moon size={12} className="mr-1" /> ä½: {currentDay.hotel}
                  </p>
                </div>
              </div>

              {currentDay.events.map((event, index) => (
                <div key={index} className="flex relative">
                  {index !== currentDay.events.length - 1 && (
                    <div className="absolute left-[19px] top-8 bottom-[-16px] w-[2px] bg-gray-200"></div>
                  )}
                  <div className="flex flex-col items-center mr-4 min-w-[40px]">
                    <div className="bg-white p-2 rounded-full shadow-sm border border-gray-100 z-10">
                      <EventIcon type={event.type} />
                    </div>
                    <span className="text-xs font-semibold text-gray-400 mt-1">{event.time}</span>
                  </div>
                  <div className="flex-1 bg-white rounded-2xl p-4 shadow-sm border border-gray-100 hover:shadow-md transition-shadow mb-2">
                    <div className="flex justify-between items-start">
                      <h3 className="font-bold text-gray-800">{event.title}</h3>
                      <button 
                        onClick={() => openMap(event.location, event.mapUrl)}
                        className="text-gray-400 hover:text-blue-500 transition-colors"
                      >
                        <MapPin size={16} />
                      </button>
                    </div>
                    <p className="text-sm text-blue-600 font-medium mt-1">{event.location}</p>
                    {event.notes && (
                      <div className="mt-2 text-xs text-gray-500 bg-gray-50 p-2 rounded-lg border border-gray-100">
                        {event.notes}
                      </div>
                    )}
                  </div>
                </div>
              ))}
              <div className="h-20"></div>
            </div>
          </>
        )}

        {activeTab === 'bucket' && (
          <div className="flex-1 overflow-y-auto px-4 py-6 bg-gray-50 space-y-4">
             <div className="bg-blue-50 p-4 rounded-xl border border-blue-100 mb-4">
               <h3 className="text-blue-800 font-bold mb-1 flex items-center"><Info size={16} className="mr-2"/> æœªå®šæ—¥æœŸçš„å£è¢‹åå–®</h3>
               <p className="text-xs text-blue-600">é€™äº›åœ°é»å¯ä»¥éš¨æ™‚å®‰æ’åœ¨ç©ºæª”ï¼</p>
             </div>
             {bucketList.map((item, idx) => (
               <div key={idx} className="bg-white rounded-xl p-4 shadow-sm border border-gray-100">
                 <div className="flex justify-between items-start mb-2">
                   <span className="text-xs font-bold text-white bg-gray-800 px-2 py-1 rounded-md">{item.category}</span>
                   <button onClick={() => openMap(item.title)} className="text-gray-400 hover:text-blue-500"><MapPin size={16}/></button>
                 </div>
                 <h3 className="font-bold text-lg text-gray-900">{item.title}</h3>
                 <p className="text-sm text-gray-600 mt-1">{item.desc}</p>
                 <div className="mt-3 flex items-center text-xs text-orange-500 font-medium">
                   <Calendar size={12} className="mr-1" />
                   å»ºè­°ï¼š{item.bestDay}
                 </div>
               </div>
             ))}
             <div className="h-20"></div>
          </div>
        )}

        {activeTab === 'docs' && (
          <div className="flex-1 overflow-y-auto px-4 py-6 bg-gray-50 space-y-6">
            <h2 className="text-xl font-bold text-gray-900 mb-2">è¡Œå‰æ³¨æ„æ¸…å–® (Checklist)</h2>
            {checklistData.map((section, idx) => (
              <div key={idx} className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                <div className="bg-gray-50 px-4 py-2 border-b border-gray-100 font-bold text-gray-700">
                  {section.category}
                </div>
                <div className="p-4 space-y-3">
                  {section.items.map((item, i) => (
                    <div key={i} className="flex items-start">
                       <CheckSquare size={20} className="text-gray-300 mr-3 mt-0.5" />
                       <div>
                         <p className="text-gray-800 font-medium">{item.text}</p>
                         {item.note && <p className="text-xs text-red-500 mt-0.5">{item.note}</p>}
                       </div>
                    </div>
                  ))}
                </div>
              </div>
            ))}
            <div className="h-20"></div>
          </div>
        )}

        {activeTab === 'map' && (
          <div className="flex-1 overflow-y-auto px-4 py-6 bg-gray-50 space-y-4">
            <h2 className="text-xl font-bold text-gray-900 mb-2">æ‰€æœ‰åœ°é»åˆ—è¡¨</h2>
            <p className="text-sm text-gray-500 mb-4">é»æ“Šé–‹å•Ÿ Google Maps</p>
            {allLocations.map((loc, idx) => (
              <div key={idx} onClick={() => openMap(loc.location, loc.mapUrl)} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center justify-between cursor-pointer hover:bg-gray-50">
                <div className="flex items-center overflow-hidden">
                  <div className="bg-blue-50 p-2 rounded-full mr-3">
                    <EventIcon type={loc.type} />
                  </div>
                  <div>
                    <h4 className="font-bold text-gray-800 truncate">{loc.title}</h4>
                    <p className="text-xs text-gray-500 truncate">{loc.location}</p>
                  </div>
                </div>
                <ChevronRight size={16} className="text-gray-300 ml-2 flex-shrink-0" />
              </div>
            ))}
            <div className="h-20"></div>
          </div>
        )}

      </div>
      
      {/* Bottom Nav - Fully Functional Now */}
      <div className="bg-white border-t border-gray-200 py-3 px-6 flex justify-between items-center text-xs text-gray-500">
         <button 
           onClick={() => setActiveTab('itinerary')}
           className={`flex flex-col items-center ${activeTab === 'itinerary' || activeTab === 'bucket' ? 'text-blue-600' : 'hover:text-blue-500'}`}
         >
           <Calendar size={20} />
           <span className="mt-1">Trip</span>
         </button>
         <button 
           onClick={() => setActiveTab('map')}
           className={`flex flex-col items-center ${activeTab === 'map' ? 'text-blue-600' : 'hover:text-blue-500'}`}
         >
           <MapPin size={20} />
           <span className="mt-1">Map</span>
         </button>
         <button 
           onClick={() => setActiveTab('docs')}
           className={`flex flex-col items-center ${activeTab === 'docs' ? 'text-blue-600' : 'hover:text-blue-500'}`}
         >
           <FileText size={20} />
           <span className="mt-1">Docs</span>
         </button>
      </div>
    </div>
  );
}